# –°–≤–æ–¥–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–ª—è Multi-Node –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. Node-—Å–µ—Ä–≤–∏—Å (Worker)
- ‚úÖ `node/main.go` - —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞
- ‚úÖ `node/api/server.go` - REST API —Å–µ—Ä–≤–µ—Ä
- ‚úÖ `node/xray/manager.go` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ XRAY –ø—Ä–æ—Ü–µ—Å—Å–æ–º
- ‚úÖ `node/Dockerfile` - Docker –æ–±—Ä–∞–∑
- ‚úÖ `node/docker-compose.yml` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Docker Compose
- ‚úÖ `node/README.md` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### 2. –ú–æ–¥–µ–ª–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ `database/model/model.go` - –¥–æ–±–∞–≤–ª–µ–Ω—ã:
  - `Node` - –º–æ–¥–µ–ª—å –Ω–æ–¥—ã
  - `InboundNodeMapping` - —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ inbound ‚Üí node
- ‚úÖ `database/db.go` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –º–æ–¥–µ–ª–∏ –≤ –º–∏–≥—Ä–∞—Ü–∏—é

### 3. –°–µ—Ä–≤–∏—Å—ã –ø–∞–Ω–µ–ª–∏
- ‚úÖ `web/service/setting.go` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã:
  - `GetMultiNodeMode()` - –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã
  - `SetMultiNodeMode(enabled)` - —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã
- ‚úÖ `web/service/node.go` - –Ω–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–æ–¥–∞–º–∏
- ‚úÖ `web/service/xray.go` - –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ multi-mode:
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã
  - –í multi-mode: –æ—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –Ω–∞ –Ω–æ–¥—ã
  - –í single-mode: —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ
- ‚úÖ `sub/subService.go` - –æ–±–Ω–æ–≤–ª—ë–Ω –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–æ–¥–ø–∏—Å–æ–∫ —Å endpoint –Ω–æ–¥

### 4. –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
- ‚úÖ `web/controller/node.go` - –Ω–æ–≤—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–æ–¥–∞–º–∏
- ‚úÖ `web/controller/xui.go` - –¥–æ–±–∞–≤–ª–µ–Ω –º–∞—Ä—à—Ä—É—Ç `/nodes` –∏ NodeController

## üîÑ –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

### Single-Mode (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
1. –í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ
2. –õ–æ–∫–∞–ª—å–Ω—ã–π XRAY Core –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
3. –ü–æ–¥–ø–∏—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è —Å endpoint –ø–∞–Ω–µ–ª–∏

### Multi-Mode
1. –í–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∞–Ω–µ–ª–∏
2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–¥ —á–µ—Ä–µ–∑ UI
3. –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∏–Ω–±–∞—É–Ω–¥–æ–≤ –Ω–æ–¥–∞–º
4. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –Ω–∞ –Ω–æ–¥—ã —á–µ—Ä–µ–∑ REST API
5. –ü–æ–¥–ø–∏—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è —Å endpoint –Ω–æ–¥

## üìù –§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ UI

–î–ª—è –ø–æ–ª–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –æ–±–Ω–æ–≤–∏—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥:

1. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∞–Ω–µ–ª–∏** (`web/html/settings/...`):
   - –î–æ–±–∞–≤–∏—Ç—å —Ç—É–º–±–ª–µ—Ä "Multi-Node Mode"

2. **–ù–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ Nodes** (`web/html/nodes.html`):
   - –°–ø–∏—Å–æ–∫ –Ω–æ–¥
   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –Ω–æ–¥
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è –Ω–æ–¥

3. **–°—Ç—Ä–∞–Ω–∏—Ü–∞ Inbounds** (`web/html/inbounds.html`):
   - –í—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ –≤—ã–±–æ—Ä–∞ –Ω–æ–¥—ã (—Ç–æ–ª—å–∫–æ –≤ multi-mode)

4. **–ü–µ—Ä–µ–≤–æ–¥—ã** (`web/translation/...`):
   - –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥—ã –¥–ª—è –Ω–æ–≤—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ UI

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –û–±–Ω–æ–≤–∏—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–æ–¥–∞–º–∏
2. –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –∑–¥–æ—Ä–æ–≤—å—è –Ω–æ–¥ (cron job)
3. –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π —Å –Ω–æ–¥–∞–º–∏
4. –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –Ω–∞ –Ω–æ–¥—ã
5. –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –Ω–æ–¥

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ–±—Ä–∞—Ç–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã —Å single-mode
2. **–ú–∏–≥—Ä–∞—Ü–∏—è –ë–î**: –ù–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
3. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: API –∫–ª—é—á–∏ –Ω–æ–¥ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞–¥—ë–∂–Ω—ã–º–∏
4. **–°–µ—Ç—å**: –ù–æ–¥—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã —Å –ø–∞–Ω–µ–ª–∏

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `MULTI_NODE_ARCHITECTURE.md` - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ
- `node/README.md` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Node-—Å–µ—Ä–≤–∏—Å–∞
