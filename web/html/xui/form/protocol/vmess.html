{{define "form/vmess"}}
<a-form layout="inline">
<a-collapse activeKey="0" v-for="(client, index) in inbound.settings.vmesses.slice(0,1)" v-if="!isEdit">    
    <a-collapse-panel header="{{ i18n "pages.inbounds.client" }}">
        <a-form layout="inline">
            <a-form-item>
                <span slot="label">
                    Email
                    <a-tooltip>
                        <template slot="title">
                            The Email Must Be Completely Unique
                        </template>
                        <a-icon type="sync" @click="getNewEmail(client)"></a-icon>
                    </a-tooltip>
                </span>
                <a-input v-model.trim="client.email" style="width: 150px;"></a-input>
            </a-form-item>
        </a-form>
        <a-form-item label="ID">
            <a-input v-model.trim="client.id" style="width: 300px;"></a-input>
        </a-form-item>
        <a-form-item label='{{ i18n "additional" }} ID'>
            <a-input type="number" v-model.number="client.alterId" style="width: 70px;"></a-input>
        </a-form-item>
		<a-form-item>
                <span slot="label">
                    IP Count Limit
                    <a-tooltip>
                        <template slot="title">
                            Disable inbound if more than entered count (0 for disable limit ip)
                        </template>
                        <a-icon type="question-circle" theme="filled"></a-icon>
                    </a-tooltip>
                </span>
                <a-input type="number" v-model.number="client.limitIp" min="0" style="width: 70px;"></a-input>
		</a-form-item>
		<a-form-item v-if="client.email && client.limitIp > 0 && isEdit">
                <span slot="label">
                    IP Log
                    <a-tooltip>
                        <template slot="title">
                            IPs history Log (before enabling inbound after it has been disabled by IP limit, you should clear the log)
                        </template>
                        <a-icon type="question-circle" theme="filled"></a-icon>
                    </a-tooltip>
                    <a-tooltip>
                        <template slot="title">
                            Clear The Log
                        </template>
                        <span style="color: #FF4D4F">
                            <a-icon type="delete" @click="clearDBClientIps(client.email,$event)"></a-icon>
                        </span>
                    </a-tooltip>
                </span>
                <a-form layout="block">
                    <a-textarea readonly @click="getDBClientIps(client.email,$event)" placeholder="Click To Get IPs"  :auto-size="{ minRows: 2, maxRows: 10 }">
                    </a-textarea>
                </a-form>
		</a-form-item>
        <a-form-item>
            <span slot="label">
                <span >{{ i18n "pages.inbounds.totalFlow" }}</span>(GB)
                <a-tooltip>
                    <template slot="title">
                        0 <span>{{ i18n "pages.inbounds.meansNoLimit" }}</span>
                    </template>
                    <a-icon type="question-circle" theme="filled"></a-icon>
                </a-tooltip>
            </span>
            <a-input-number v-model="client._totalGB" :min="0"></a-input-number>
        </a-form-item>
        <a-form-item>
            <span slot="label">
                <span >{{ i18n "pages.inbounds.expireDate" }}</span>
                <a-tooltip>
                    <template slot="title">
                        <span>{{ i18n "pages.inbounds.leaveBlankToNeverExpire" }}</span>
                    </template>
                    <a-icon type="question-circle" theme="filled"></a-icon>
                </a-tooltip>
            </span>
            <a-date-picker :show-time="{ format: 'HH:mm' }" format="YYYY-MM-DD HH:mm"
                           v-model="client._expiryTime" style="width: 170px;"></a-date-picker>
        </a-form-item>
    </a-collapse-panel>
</a-collapse>
<a-collapse v-else>
    <a-collapse-panel :header="'{{ i18n "pages.client.clientCount"}} : ' + inbound.settings.vmesses.length">
        <table width="100%">
                <tr class="client-table-header">
                <th v-for="col in Object.keys(inbound.settings.vmesses[0]).slice(0, 3)">[[ col ]]</th>
            </tr>
            <tr v-for="(client, index) in inbound.settings.vmesses" :class="index % 2 == 1 ? 'client-table-odd-row' : ''">
                <td v-for="col in Object.values(client).slice(0, 3)">[[ col ]]</td>
            </tr>
        </table>
    </a-collapse-panel>
</a-collapse>
<a-form layout="inline">
    <a-form-item label='{{ i18n "pages.inbounds.disableInsecureEncryption" }}'>
        <a-switch v-model.number="inbound.settings.disableInsecure"></a-switch>
    </a-form-item>
</a-form>

{{end}}
